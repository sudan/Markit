{%extends "base.html" %}

{%  block left_pane %}
	<div id="user_info">
		<div>
			<a href="profile/{{user_info.username}}">
				<img src="{{user_info.image_url}}" width="100" height="100" alt="{{user_info.username}}"/>
			</a>
		</div>
		<div>
			<b class="title">{{user_info.username}}</b>
		</div>
		<div>
			<a href="#">{{user_info.following}} Following</a>
		</div>
		<div>
			<a href="#">{{user_info.followers}} Followers</a>
		</div>
	</div>
{% endblock %}

{% block middle_pane %}

	<div id="category_list" class="inline-fields">
		<input type="button" id="display_category_form_button" class="btn-primary" value="Create a category"/>

		<div id="create_category" style="display:none">

			<form id="add_category_form" method="POST" action="/category/">{% csrf_token %}
				<span><label for="id_category">Category Name:</label></span>
				<span class="inline-fields">{{category_form.name}}</span>
				<br/>
				<input type="submit" value="Create" class="btn-primary" id="add_category"/> 
				<span id="category_name_error" class="error-messages"></span>
			</form>	

		</div>
	</div>
	
	<div id="bookmark_list">

		<input type="button" id="display_bookmark_form_button" class="btn-primary" value="Create a bookmark"/>
		
			<div id="create_bookmark" style="display:none">

				<form id="add_bookmark_form" method="POST" action="/bookmark/">{% csrf_token %}
				
            		<div>
            			<span><label for="id_visibility">Visibility:</label></span>
            			<span class="inline-fields">{{bookmark_form.visibility}}</span>
            			<span class="bookmark_visibility_error error-messages"></span>
            		</div>

					<div class="inline-fields">
                		<span><label for="id_url">URL:</label></span>
                		<span>{{bookmark_form.url}}</span>
                		<span class="bookmark_url_error error-messages"></span>
            		</div>

            		<div class="inline-fields">
                		<span ><label for="id_name">Name:</label></span>
                		<span>{{bookmark_form.name}}</span>
                		<span class="bookmark_name_error error-messages"></span>
            		</div>

            		<div class="inline-fields">
                		<span><label for="id_description">Description:</label></span>
                		<span class="inline-fields">{{bookmark_form.description}}</span>
                		<span class="bookmark_description_error error-messages"></span>
            		</div>

            		<div>
						<input type="submit" value="Create" class="btn-primary" id="add_bookmark"/>             	
					</div>

				</form>
			
			</div>

			<div>
				<img id="image-loader" src="{{STATIC_URL}}custom/img/ajax-loader.gif">
			</div>

			<div id="bookmark_wrapper">
		
				<script type="text/template" id="bookmarkDisplayTemplate">
				
					<% if(visibility == "private"){ %>
						<img  style="float:right" src="{{STATIC_URL}}custom/img/private.jpg"/>
					<% } %>
					<div><i>Created Date:<%= creation_date %></i></div>
					<div>
						<span><h3><a target="_blank" href="<%= url %>"><%= name %></a></h3></span>
					</div>
					<input type="hidden" name="bookmark_id" value="<%= bookmark_id %>"/>
					<p><%= description %>
						<span><button class="btn-primary edit_bookmark">Edit</button></span>
					</p>
				
				</script>

			</div>

			<div class="bookmark_edit_wrapper">

				<script type="text/template" id="bookmarkEditTemplate">

					<form id="edit_bookmark_form" method="POST" action="/bookmark/">{% csrf_token %}

						<div class="inline-fields">
                			<span><label for="id_url">URL:</label></span>
                			<span><input type="text" name="url" value="<%= url %>"/></span>
            			</div>

            			<div class="inline-fields">
                			<span ><label for="id_name">Name:</label></span>
                			<span><input type="text" name="name" value="<%=  name %>"/></span>
            			</div>

            			<div class="inline-fields">
                			<span><label for="id_description">Description:</label></span>
                			<span class="inline-fields"><input type="text" name="description" value="<%= description %>"/></span>
            			</div>

            			<div class="inline-fields">
							<span><label for="id_visibility">Visibility:</label></span>
							<span>
								<label class="inline-fields"><input type="radio" checked="checked" name="visibility" value="public"/>Public</label>
							</span>
							<span>
								<label class="inline-fields"><input type="radio" name="visibility" value="private"/>Private</label>
							</span>
						</div>

            			<input type="hidden" name="bookmark_id" value="<%= bookmark_id %>"/>

            			<div>
							<button class="save_bookmark btn-primary">Save</button>
							<button class="cancel_bookmark btn-primary">Cancel</button>
							<span class="edit_bookmark_error_messages error-messages"></span>
						</div>

					</form>

				</script>

			</div>	

		</div>
	

{% endblock %}


